document.addEventListener("DOMContentLoaded",(function(){var elems=document.querySelectorAll(".sidenav"),instances=M.Sidenav.init(elems),elems;async function loop(){if("true"==localStorage.getItem("SETTING_stream"))try{let request=await fetch("/api/classifications/latest/image"),blob=await request.blob(),url=URL.createObjectURL(blob);document.getElementById("image-stream").src=url}catch(error){console.error(error)}try{let response=await fetch("/api/classifications/latest"),data=await response.json();data.classification.forEach(classification=>{let content=document.createElement("p"),time=new Date(data.timestamp);content.innerHTML=time.getHours()+":",content.innerHTML+=time.getMinutes()+":",content.innerHTML+=time.getSeconds()+" > ",content.innerHTML+=classification.class+" - ";let confidence=100*Number(classification.confidence);confidence=Math.round(100*confidence)/100,content.innerHTML+=confidence+"%",document.getElementById("lastClassifications").appendChild(content)})}catch(error){console.error(error)}setTimeout(loop,"false"==localStorage.getItem("SETTING_framerate")?1e3:200)}(elems=document.querySelectorAll(".checkbox")).forEach((function(elem){var id=elem.getAttribute("data-id");null==localStorage.getItem("SETTING_"+id)&&localStorage.setItem("SETTING_"+id,!1),elem.checked="true"==localStorage.getItem("SETTING_"+id),elem.addEventListener("change",(function(){localStorage.setItem("SETTING_"+id,elem.checked)})),"stream"==id&&elem.addEventListener("change",(function(){elem.checked?document.getElementById("stream").style.display="block":document.getElementById("stream").style.display="none"}))})),"false"==localStorage.getItem("SETTING_stream")&&(document.getElementById("stream").style.display="none"),loop(),document.getElementById("command").addEventListener("keyup",(async function(event){if(13===event.keyCode){switch(this.value=this.value.toLowerCase(),this.value){case"clear":document.getElementById("lastClassifications").innerHTML="";break;case"help":let help=document.createElement("p");help.innerHTML="<br>--- HELP ---------- <br>",help.innerHTML+="clear <br>&nbsp; &nbsp;Clear the last classifications <br>",help.innerHTML+="help <br>&nbsp; &nbsp;Show this help <br>",help.innerHTML+="version <br>&nbsp; &nbsp;Show the version of the application <br><br>",document.getElementById("lastClassifications").appendChild(help);break;case"version":let version=document.createElement("p");version.innerHTML="Version: 1.0.0",document.getElementById("lastClassifications").appendChild(version);break;case"hello kitty":if(null==document.getElementById("confetti-script")){let script=document.createElement("script");script.src="js/confetty.min.js",script.id="confetti-script",document.body.appendChild(script)}setTimeout((function(){displayConfetty(5e3)}),500);break;default:let error=document.createElement("p");error.innerHTML="ERROR: Command not found",document.getElementById("lastClassifications").appendChild(error)}this.value=""}}))}));